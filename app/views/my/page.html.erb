<div class="contextual">
    <%= link_to l(:label_personalize_page), :action => 'page_layout' %>
</div>

<h2><%=l(:label_my_page)%></h2>

<div id="list-top">
  <% @blocks['top'].each do |b| %>
  <div class="mypage-box">
    <% if b.include?('query') %>
      <%= render :partial => "my/blocks/query", :locals => { :user => @user, :query_id => b.sub(/^(query)/,'')} %>
    <% else %>
     <% next unless MyController::BLOCKS.keys.include? b  %>
      <%= render :partial => "my/blocks/#{b}", :locals => { :user => @user } %>
    <% end %>
  </div>
  <% end if @blocks['top'] %>
</div>

<div id="list-left" class="splitcontentleft">
  <% @blocks['left'].each do |b| %>
  <div class="mypage-box">
    <% if b.include?('query') %>
      <%= render :partial => "my/blocks/query", :locals => { :user => @user, :query_id => b.sub(/^(query)/,'')} %>
    <% else %>
     <% next unless MyController::BLOCKS.keys.include? b  %>
      <%= render :partial => "my/blocks/#{b}", :locals => { :user => @user } %>
    <% end %>
  </div>
  <% end if @blocks['left'] %>
</div>

<div id="list-right" class="splitcontentright">
  <% @blocks['right'].each do |b| %>
  <div class="mypage-box">
    <% if b.include?('query') %>
      <%= render :partial => "my/blocks/query", :locals => { :user => @user, :query_id => b.sub(/^(query)/,'')} %>
    <% else %>
     <% next unless MyController::BLOCKS.keys.include? b  %>
      <%= render :partial => "my/blocks/#{b}", :locals => { :user => @user } %>
    <% end %>
  </div>
  <% end if @blocks['right'] %>
</div>

<%= context_menu issues_context_menu_path %>

<% html_title(l(:label_my_page)) -%>